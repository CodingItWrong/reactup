#!/usr/bin/env bash

DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )/.."

npx create-react-app $1
cd $1

git init .
git add .
git commit -m "Create react app"

rm src/App.css \
   src/App.test.js \
   src/index.css \
   src/logo.svg
cp "${DIR}/template/src/App.js" src/App.js
cp "${DIR}/template/src/index.js" src/index.js
git add .
git commit -m "Remove boilerplate"

yarn add -D eslint \
            babel-eslint \
            eslint-config-prettier \
            eslint-plugin-import \
            eslint-plugin-jsx-a11y \
            eslint-plugin-prettier \
            eslint-plugin-react
cp "${DIR}/template/.eslintrc.js" .eslintrc.js
cp "${DIR}/template/.prettierrc.js" .prettierrc.js
git add .
git commit -m "Add ESLint and Prettier"

yarn add -D cypress \
            cypress-react-unit-test \
            @cypress/webpack-preprocessor \
            babel-plugin-transform-class-properties
mkdir cypress
mkdir cypress/plugins
cp "${DIR}/template/cypress/plugins/index.js" cypress/plugins/index.js
git add .
git commit -m "Add Cypress"
